<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Leggere i Numeri in Inglese</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- jsPDF CDN for PDF generation -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <style>
        /* Stili personalizzati per estetica e interattività */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f0f4f8; /* Light blue-gray background */
            color: #334155; /* Darker text color */
        }
        .container {
            max-width: 900px;
            margin: 2rem auto;
            padding: 2rem;
            background-color: #ffffff;
            border-radius: 12px; /* More rounded corners */
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1); /* Softer shadow */
        }
        h1, h2, h3 {
            color: #1e3a8a; /* Darker blue for headings */
            font-weight: 700;
        }
        .section-box {
            background-color: #e0f2fe; /* Lighter blue for sections */
            border-left: 6px solid #3b82f6; /* Blue border */
            padding: 1.5rem;
            border-radius: 8px;
            margin-bottom: 1.5rem;
        }
        .explanation-points ul {
            list-style: disc;
            margin-left: 1.5rem;
            margin-bottom: 1rem;
        }
        .explanation-points li {
            margin-bottom: 0.5rem;
        }
        .exercise-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 1rem;
        }
        .exercise-item {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 0.75rem;
            background-color: #f8fafc;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
        }
        .exercise-item strong {
            flex-shrink: 0;
            width: 80px;
            text-align: right;
            font-size: 1.1rem;
        }
        .exercise-item input[type="text"] {
            flex-grow: 1;
            padding: 0.5rem 0.75rem;
            border: 1px solid #cbd5e1;
            border-radius: 6px;
            outline: none;
            transition: border-color 0.2s ease-in-out;
        }
        .exercise-item input[type="text"]:focus {
            border-color: #3b82f6;
        }
        .button-primary {
            background-color: #3b82f6;
            color: white;
            padding: 0.75rem 1.5rem;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.2s ease-in-out, transform 0.1s ease-in-out;
            border: none;
            box-shadow: 0 4px 10px rgba(59, 130, 246, 0.3);
        }
        .button-primary:hover {
            background-color: #2563eb;
            transform: translateY(-1px);
        }
        .button-primary:active {
            transform: translateY(0);
        }
        .button-secondary {
            background-color: #6b7280;
            color: white;
            padding: 0.75rem 1.5rem;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.2s ease-in-out;
            border: none;
            margin-left: 1rem;
        }
        .button-secondary:hover {
            background-color: #4b5563;
        }
        .feedback-message {
            margin-top: 1rem;
            padding: 0.75rem;
            border-radius: 6px;
            font-weight: 600;
            text-align: center;
            display: none; /* Hidden by default */
        }
        .feedback-correct {
            background-color: #d1fae5; /* Green for correct */
            color: #065f46;
        }
        .feedback-incorrect {
            background-color: #fee2e2; /* Red for incorrect */
            color: #991b1b;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1 class="text-4xl text-center mb-6">Come Leggere i Numeri in Inglese (da 100 a 9999)</h1>

        <!-- Sezione 1: Spiegazione 100-999 -->
        <div class="section-box">
            <h2 class="text-2xl mb-4">Leggere i Numeri da 100 a 999</h2>
            <p class="text-lg leading-relaxed mb-4">
                Quando si leggono i numeri da 100 a 999, si usa la parola "hundred" (cento). È importante ricordare che "hundred" rimane sempre al singolare, anche se si riferisce a più centinaia.
            </p>
            <div class="explanation-points">
                <ul>
                    <li>Si inizia con il numero delle centinaia, seguito da "hundred".</li>
                    <li>Per i numeri successivi (decine e unità), si può usare "and" prima di essi (comune in inglese britannico, opzionale in americano).</li>
                    <li>Se non ci sono decine, si legge direttamente l'unità dopo "and".</li>
                </ul>
                <h3 class="text-xl mt-4 mb-2">Esempi:</h3>
                <ul>
                    <li><strong>100:</strong> One hundred</li>
                    <li><strong>150:</strong> One hundred (and) fifty</li>
                    <li><strong>305:</strong> Three hundred (and) five</li>
                    <li><strong>789:</strong> Seven hundred (and) eighty-nine</li>
                    <li><strong>999:</strong> Nine hundred (and) ninety-nine</li>
                </ul>
            </div>
        </div>

        <!-- Sezione 2: Spiegazione 1000-9999 -->
        <div class="section-box">
            <h2 class="text-2xl mb-4">Leggere i Numeri da 1000 a 9999</h2>
            <p class="text-lg leading-relaxed mb-4">
                Per i numeri da 1000 a 9999, si usa la parola "thousand" (mille). Anche "thousand" rimane sempre al singolare.
            </p>
            <div class="explanation-points">
                <ul>
                    <li>Si legge il numero delle migliaia, seguito da "thousand".</li>
                    <li>Poi si legge la parte rimanente del numero (centinaia, decine, unità) come spiegato per i numeri da 100 a 999.</li>
                </ul>
                <h3 class="text-xl mt-4 mb-2">Esempi:</h3>
                <ul>
                    <li><strong>1,000:</strong> One thousand</li>
                    <li><strong>2,050:</strong> Two thousand (and) fifty</li>
                    <li><strong>4,321:</strong> Four thousand three hundred (and) twenty-one</li>
                    <li><strong>7,008:</strong> Seven thousand (and) eight</li>
                    <li><strong>9,999:</strong> Nine thousand nine hundred (and) ninety-nine</li>
                </ul>
            </div>
        </div>

        <!-- Esercizio di Trascrizione -->
        <div class="section-box">
            <h2 class="text-2xl mb-4">Esercizio: Trascrivi i Numeri in Lettere</h2>
            <p class="text-lg leading-relaxed mb-4">
                Trascrivi i seguenti numeri in lettere. Ricorda di usare "and" se appropriato.
            </p>
            <div id="number-transcription-exercise" class="exercise-grid">
                <!-- Numbers will be populated by JavaScript -->
            </div>
            <div class="flex justify-center mt-6">
                <button class="button-primary" onclick="checkTranscriptionExercise()">I miei risultati</button>
                <button class="button-secondary" onclick="resetTranscriptionExercise()">Reset</button>
            </div>
            <div id="transcription-feedback" class="feedback-message"></div>
        </div>
    </div>

    <script>
        // Data for the transcription exercise
        const transcriptionNumbers = [
            { number: 100, answer: "one hundred" },
            { number: 250, answer: "two hundred and fifty" },
            { number: 301, answer: "three hundred and one" },
            { number: 789, answer: "seven hundred and eighty-nine" },
            { number: 1000, answer: "one thousand" },
            { number: 1005, answer: "one thousand and five" },
            { number: 2020, answer: "two thousand and twenty" },
            { number: 3400, answer: "three thousand four hundred" },
            { number: 5678, answer: "five thousand six hundred and seventy-eight" },
            { number: 9999, answer: "nine thousand nine hundred and ninety-nine" }
        ];

        // Function to create the transcription exercise
        function createTranscriptionExercise() {
            const container = document.getElementById('number-transcription-exercise');
            container.innerHTML = '';
            transcriptionNumbers.forEach((item, index) => {
                const itemDiv = document.createElement('div');
                itemDiv.classList.add('exercise-item');

                const numberStrong = document.createElement('strong');
                numberStrong.textContent = item.number;
                itemDiv.appendChild(numberStrong);

                const input = document.createElement('input');
                input.type = 'text';
                input.setAttribute('data-index', index);
                input.placeholder = 'Scrivi il numero in lettere...';
                itemDiv.appendChild(input);

                container.appendChild(itemDiv);
            });
        }

        // Function to check the transcription exercise and generate PDF
        function checkTranscriptionExercise() {
            const inputs = document.querySelectorAll('#number-transcription-exercise input[type="text"]');
            let correctCount = 0;
            const feedback = document.getElementById('transcription-feedback');
            const resultsForPdf = [];

            transcriptionNumbers.forEach((item, index) => {
                const input = inputs[index];
                const userAnswer = input.value.trim().toLowerCase().replace(/\s+/g, ' '); // Normalize spaces
                const correctAnswer = item.answer.toLowerCase().replace(/\s+/g, ' '); // Normalize spaces
                const isCorrect = (userAnswer === correctAnswer);

                if (isCorrect) {
                    input.style.borderColor = '#10b981'; /* Green */
                    input.style.backgroundColor = '#ecfdf5'; /* Light green */
                    correctCount++;
                } else {
                    input.style.borderColor = '#ef4444'; /* Red */
                    input.style.backgroundColor = '#fef2f2'; /* Light red */
                }

                resultsForPdf.push({
                    number: item.number,
                    userAnswer: input.value.trim(),
                    correctAnswer: item.answer,
                    isCorrect: isCorrect
                });
            });

            feedback.style.display = 'block';
            if (correctCount === transcriptionNumbers.length) {
                feedback.classList.remove('feedback-incorrect');
                feedback.classList.add('feedback-correct');
                feedback.textContent = "Complimenti! Tutte le risposte sono corrette!";
            } else {
                feedback.classList.remove('feedback-correct');
                feedback.classList.add('feedback-incorrect');
                feedback.textContent = `Hai ${correctCount} risposte corrette su ${transcriptionNumbers.length}. Riprova!`;
            }

            generateTranscriptionPdfReport(resultsForPdf, correctCount, transcriptionNumbers.length);
        }

        // Function to reset the transcription exercise
        function resetTranscriptionExercise() {
            const inputs = document.querySelectorAll('#number-transcription-exercise input[type="text"]');
            inputs.forEach(input => {
                input.value = '';
                input.style.borderColor = '';
                input.style.backgroundColor = '';
            });
            document.getElementById('transcription-feedback').style.display = 'none';
        }

        // Function to generate PDF report
        function generateTranscriptionPdfReport(results, correctCount, totalQuestions) {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();

            doc.setFontSize(22);
            doc.text("Risultati Trascrizione Numeri", 10, 20);

            doc.setFontSize(14);
            doc.text("Il tuo punteggio: " + correctCount + " / " + totalQuestions, 10, 35);
            doc.text("--------------------------------------------------", 10, 45);

            let yOffset = 55;
            doc.setFontSize(12);

            results.forEach((item, index) => {
                const numberText = `${item.number}:`;
                const userAnswerText = `La tua risposta: ${item.userAnswer}`;
                const correctAnswerText = `Corretta: ${item.correctAnswer}`;

                doc.text(numberText, 10, yOffset);
                yOffset += 7;

                doc.text(userAnswerText, 15, yOffset, { maxWidth: 175 });
                yOffset += doc.getTextDimensions(userAnswerText, { maxWidth: 175 }).h + 2;

                if (item.isCorrect) {
                    doc.setTextColor(30, 130, 76); /* Green */
                } else {
                    doc.setTextColor(220, 50, 50); /* Red */
                }
                doc.text(correctAnswerText, 15, yOffset, { maxWidth: 175 });
                doc.setTextColor(0, 0, 0); /* Reset color */
                yOffset += doc.getTextDimensions(correctAnswerText, { maxWidth: 175 }).h + 5;
            });

            doc.save(`Risultati_Numeri_Inglese.pdf`);
        }

        // Initialize exercise on page load
        document.addEventListener('DOMContentLoaded', createTranscriptionExercise);
    </script>
</body>
</html>
